name: Podcast Intelligence with Podwise

on:
  schedule:
    # æ¯6å°æ—¶è¿è¡Œä¸€æ¬¡
    - cron: '0 */6 * * *'
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  update-podcasts:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ Checkout ä»£ç 
      uses: actions/checkout@v3
      
    - name: ğŸ è®¾ç½® Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
        
    - name: ğŸ“¦ å®‰è£…ä¾èµ–
      run: |
        pip install requests
        
    - name: ğŸ™ï¸ æŠ“å–æ’­å®¢çƒ­æ¦œ
      run: |
        python scripts/fetch_podcasts.py
        
    - name: ğŸ“‹ ç”Ÿæˆ Podwise å¯¼å…¥æ¸…å•
      run: |
        python scripts/podwise_import_helper.py
        
    - name: ğŸ“Š ç”Ÿæˆæ™ºèƒ½æŠ¥å‘Š
      run: |
        python scripts/report_generator_with_podwise.py
        
    - name: ğŸ’¾ æäº¤æ›´æ–°
      run: |
        git config --local user.email "github-actions[bot]@users.noreply.github.com"
        git config --local user.name "github-actions[bot]"
        git add .
        git diff --quiet && git diff --staged --quiet || git commit -m "ğŸ¤– è‡ªåŠ¨æ›´æ–°æ’­å®¢çƒ­æ¦œå’Œ Podwise å¯¼å…¥æ¸…å•"
        git push